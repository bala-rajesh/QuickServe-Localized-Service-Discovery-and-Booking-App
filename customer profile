<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>QuickServe - Customer Profile</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<style>
  body {
    margin: 0;
    background: #f4f6f9;
    font-family: "Segoe UI", sans-serif;
    transition: 0.3s;
  }

  body.dark {
    background: #1f1f1f;
    color: #fff;
  }

  .container {
    max-width: 900px;
    margin: 40px auto;
    background: #fff;
    padding: 30px;
    border-radius: 16px;
    box-shadow: 0 6px 20px rgba(0,0,0,0.09);
    transition: 0.3s;
    position: relative;
  }

  body.dark .container {
    background: #2b2b2b;
    box-shadow: 0 6px 20px rgba(255,255,255,0.08);
  }

  h2 {
    text-align: center;
    color: #1a73e8;
    font-size: 28px;
  }

  /* Back to homepage arrow */
  .back-home {
    position: absolute;
    top: 20px;
    left: 20px;
    font-size: 24px;
    cursor: pointer;
    color: #1a73e8;
    transition: 0.3s;
  }

  .back-home:hover {
    color: #105ac1;
  }

  .profile-photo {
    text-align: center;
    margin: 20px 0;
  }

  .profile-photo img {
    width: 140px;
    height: 140px;
    border-radius: 50%;
    object-fit: cover;
    border: 4px solid #1a73e8;
    cursor: pointer;
    transition: 0.3s;
  }

  .profile-photo img:hover {
    transform: scale(1.05);
    border-color: #105ac1;
  }

  .profile-name {
    text-align: center;
    font-weight: bold;
    font-size: 20px;
    margin-top: 10px;
    color: #1a73e8;
  }

  .details-box {
    background: #f8faff;
    padding: 20px;
    border-radius: 14px;
    box-shadow: inset 0 0 8px rgba(0,0,0,0.05);
    margin-top: 20px;
    transition: 0.3s;
  }

  body.dark .details-box {
    background: #3a3a3a;
  }

  .detail-row {
    margin-bottom: 12px;
    font-size: 17px;
    display: flex;
    align-items: center;
  }

  .detail-row i {
    width: 25px;
    text-align: center;
    color: #1a73e8;
    margin-right: 10px;
  }

  .label {
    font-weight: bold;
    margin-right: 5px;
  }

  .edit-btn, .save-btn, .cancel-btn, .back-btn {
    margin: 25px auto 0 auto;
    display: block;
    width: 200px;
    padding: 12px;
    font-size: 16px;
    border-radius: 10px;
    cursor: pointer;
    border: none;
    transition: 0.3s;
  }

  .edit-btn { background: #1a73e8; color: #fff; }
  .edit-btn:hover { background: #105ac1; }

  .save-btn { background: #0a8f08; color: #fff; }
  .save-btn:hover { background: #066b06; }

  .cancel-btn { background: #aaa; color: #fff; }
  .cancel-btn:hover { background: #888; }

  .back-btn { background: #ffa500; color: #fff; }
  .back-btn:hover { background: #e69500; }

  /* Form Styling */
  input, select, textarea {
    width: 100%;
    padding: 10px;
    margin-top: 6px;
    border-radius: 10px;
    border: 1px solid #ccc;
  }

  textarea { resize: none; }

  .form-group { margin-top: 15px; }

  /* Dark mode toggle */
  .toggle-btn {
    position: fixed;
    top: 15px;
    right: 20px;
    font-size: 24px;
    cursor: pointer;
    z-index: 100;
  }

  /* QuickServe stats */
  .stats-box {
    display: flex;
    justify-content: space-around;
    margin-top: 20px;
    flex-wrap: wrap;
  }

  .stat {
    background: #e6f0ff;
    padding: 15px;
    border-radius: 10px;
    flex: 1 1 40%;
    margin: 10px;
    text-align: center;
    transition: 0.3s;
    cursor: pointer;
  }

  body.dark .stat {
    background: #444;
  }

  .stat h3 { margin: 0; color: #1a73e8; }

  /* Modal Styling */
  .modal {
    display: none;
    position: fixed;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    background: #fff;
    padding: 25px;
    border-radius: 16px;
    box-shadow: 0 6px 20px rgba(0,0,0,0.2);
    z-index: 200;
    max-width: 400px;
    width: 90%;
  }

  body.dark .modal {
    background: #2b2b2b;
    color: #fff;
  }

  .modal h3 {
    margin-top: 0;
    color: #1a73e8;
  }

  .modal button {
    margin-top: 15px;
    padding: 10px 15px;
    background: #1a73e8;
    color: #fff;
    border: none;
    border-radius: 10px;
    cursor: pointer;
  }

  .modal button:hover {
    background: #105ac1;
  }

</style>
</head>
<body>

<i class="fa-solid fa-moon toggle-btn" id="themeToggle" title="Toggle Dark Mode"></i>

<div class="container">

  <!-- Back to homepage arrow -->
  <i class="fa-solid fa-arrow-left back-home" title="Back to Home" onclick="goHome()"></i>

  <h2>QuickServe - Customer Profile</h2>

  <!-- PROFILE VIEW MODE -->
  <div id="viewMode">

    <div class="profile-photo">
      <img id="viewPhoto" src="https://i.postimg.cc/wjGmgyTD/quickserve-user.png" alt="Profile Photo" onclick="switchToEdit()">
      <div class="profile-name" id="profileName">Ramya S</div>
    </div>

    <div class="details-box" id="viewDetails"></div>

    <div class="stats-box">
      <div class="stat" onclick="showModal('Bookings','Here are some sample bookings:\n1. AC Repair\n2. Plumbing\n3. Home Cleaning')">
        <h3 id="bookingCount">5</h3> Bookings
      </div>
      <div class="stat" onclick="showModal('Saved Services','Here are some saved services:\n1. AC Service\n2. Electrical Repair\n3. Sofa Cleaning')">
        <h3 id="savedServices">3</h3> Saved Services
      </div>
      <div class="stat" onclick="showModal('Membership','Current membership level: Gold\nBenefits: Priority Booking, Discounts')">
        <h3 id="membership">Gold</h3> Membership
      </div>
    </div>

    <button class="edit-btn" onclick="switchToEdit()">Edit Profile</button>

  </div>

  <!-- EDIT MODE -->
  <div id="editMode" style="display:none;">

    <div class="form-group">
      <label>Profile Photo</label>
      <input type="file" id="editPhotoUpload" accept="image/*">
    </div>

    <div class="form-group">
      <label>Full Name</label>
      <input id="editName" type="text">
    </div>

    <div class="form-group">
      <label>Email</label>
      <input id="editEmail" type="email">
    </div>

    <div class="form-group">
      <label>Phone Number</label>
      <input id="editPhone" type="number">
    </div>

    <div class="form-group">
      <label>Date of Birth</label>
      <input id="editDob" type="date">
    </div>

    <div class="form-group">
      <label>Gender</label>
      <select id="editGender">
        <option>Female</option>
        <option>Male</option>
        <option>Other</option>
      </select>
    </div>

    <div class="form-group">
      <label>City</label>
      <input id="editCity" type="text">
    </div>

    <div class="form-group">
      <label>Address</label>
      <input id="editAddress" type="text" placeholder="Street / Door No.">
    </div>

    <div class="form-group">
      <label>Pincode</label>
      <input id="editPincode" type="number">
    </div>

    <div class="form-group">
      <label>Alternate Phone</label>
      <input id="editAltPhone" type="number">
    </div>

    <div class="form-group">
      <label>Service Preferences</label>
      <textarea id="editPreferences"></textarea>
    </div>

    <button class="save-btn" onclick="saveProfile()">Save Changes</button>
    <button class="back-btn" onclick="cancelEdit()">Back</button>

  </div>

</div>

<!-- Modal -->
<div class="modal" id="infoModal">
  <h3 id="modalTitle"></h3>
  <p id="modalContent" style="white-space: pre-line;"></p>
  <button onclick="closeModal()">Close</button>
</div>

<script>
  // Default profile sample
  const defaultProfile = {
    photo: "https://i.postimg.cc/wjGmgyTD/quickserve-user.png",
    name: "Alexa",
    email: "alexa123@gmail.com",
    phone: "9876543210",
    dob: "2004-06-10",
    gender: "Female",
    city: "Trichy, Tamil Nadu",
    address: "123, MG Road",
    pincode: "620001",
    altPhone: "9876543211",
    preferences: "Home cleaning, Appliance repair",
    bookings: 5,
    savedServices: 3,
    membership: "Gold"
  };

  function loadProfile() {
    const saved = JSON.parse(localStorage.getItem("quickserveCustomer")) || defaultProfile;

    document.getElementById("viewPhoto").src = saved.photo;
    document.getElementById("profileName").innerText = saved.name;

    document.getElementById("viewDetails").innerHTML = `
      <div class="detail-row"><i class="fa-solid fa-user"></i><span class="label">Full Name:</span>${saved.name}</div>
      <div class="detail-row"><i class="fa-solid fa-envelope"></i><span class="label">Email:</span>${saved.email}</div>
      <div class="detail-row"><i class="fa-solid fa-phone"></i><span class="label">Phone:</span>${saved.phone}</div>
      <div class="detail-row"><i class="fa-solid fa-calendar"></i><span class="label">DOB:</span>${saved.dob}</div>
      <div class="detail-row"><i class="fa-solid fa-venus-mars"></i><span class="label">Gender:</span>${saved.gender}</div>
      <div class="detail-row"><i class="fa-solid fa-city"></i><span class="label">City:</span>${saved.city}</div>
      <div class="detail-row"><i class="fa-solid fa-location-dot"></i><span class="label">Address:</span>${saved.address}</div>
      <div class="detail-row"><i class="fa-solid fa-location-pin"></i><span class="label">Pincode:</span>${saved.pincode}</div>
      <div class="detail-row"><i class="fa-solid fa-phone-volume"></i><span class="label">Alt Phone:</span>${saved.altPhone}</div>
      <div class="detail-row"><i class="fa-solid fa-list"></i><span class="label">Preferences:</span>${saved.preferences}</div>
    `;

    document.getElementById("bookingCount").innerText = saved.bookings;
    document.getElementById("savedServices").innerText = saved.savedServices;
    document.getElementById("membership").innerText = saved.membership;
  }

  function switchToEdit() {
    const saved = JSON.parse(localStorage.getItem("quickserveCustomer")) || defaultProfile;

    document.getElementById("editName").value = saved.name;
    document.getElementById("editEmail").value = saved.email;
    document.getElementById("editPhone").value = saved.phone;
    document.getElementById("editDob").value = saved.dob;
    document.getElementById("editGender").value = saved.gender;
    document.getElementById("editCity").value = saved.city;
    document.getElementById("editAddress").value = saved.address;
    document.getElementById("editPincode").value = saved.pincode;
    document.getElementById("editAltPhone").value = saved.altPhone;
    document.getElementById("editPreferences").value = saved.preferences;

    document.getElementById("viewMode").style.display = "none";
    document.getElementById("editMode").style.display = "block";
  }

  document.getElementById("editPhotoUpload").addEventListener("change", function(e){
    const file = e.target.files[0];
    if(file){
      const reader = new FileReader();
      reader.onload = function(event){
        document.getElementById("viewPhoto").src = event.target.result;
        localStorage.setItem("quickserveCustomerPhoto", event.target.result);
      }
      reader.readAsDataURL(file);
    }
  });

  function saveProfile() {
    const photo = localStorage.getItem("quickserveCustomerPhoto") || defaultProfile.photo;
    const updated = {
      photo: photo,
      name: document.getElementById("editName").value,
      email: document.getElementById("editEmail").value,
      phone: document.getElementById("editPhone").value,
      dob: document.getElementById("editDob").value,
      gender: document.getElementById("editGender").value,
      city: document.getElementById("editCity").value,
      address: document.getElementById("editAddress").value,
      pincode: document.getElementById("editPincode").value,
      altPhone: document.getElementById("editAltPhone").value,
      preferences: document.getElementById("editPreferences").value,
      bookings: defaultProfile.bookings,
      savedServices: defaultProfile.savedServices,
      membership: defaultProfile.membership
    };
    localStorage.setItem("quickserveCustomer", JSON.stringify(updated));
    document.getElementById("editMode").style.display = "none";
    document.getElementById("viewMode").style.display = "block";
    loadProfile();
  }

  function cancelEdit() {
    document.getElementById("editMode").style.display = "none";
    document.getElementById("viewMode").style.display = "block";
  }

  // Dark Mode toggle
  document.getElementById("themeToggle").addEventListener("click", ()=>{
    document.body.classList.toggle("dark");
  });

  // Modal functions
  function showModal(title, content){
    document.getElementById("modalTitle").innerText = title;
    document.getElementById("modalContent").innerText = content;
    document.getElementById("infoModal").style.display = "block";
  }

  function closeModal(){
    document.getElementById("infoModal").style.display = "none";
  }

  // Back to homepage function
  function goHome(){
    // Replace '#' with your actual homepage URL
    window.location.href = "#";
  }

  loadProfile();
</script>
</body>
</html>
